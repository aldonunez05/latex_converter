<!DOCTYPE html>
<html>
  <body>
    <h2>MNIST Number Classifier</h2>
    <input type="file" id="fileInput">
    <button onclick="send()">Submit</button>
    <p id="output"></p>

    <script>
      async function send() {
	  console.log("send function called")
        const file = document.getElementById("fileInput").files[0];
        const form = new FormData();
        form.append("file", file);

        const r = await fetch("http://localhost:8000/predict", {
          method: "POST",
          body: form
        });

		console.log("response status", r.status);
		console.log("raw result", await r.clone().text());

        const result = await r.json();
        document.getElementById("output").innerText =
          "Predicted digit: " + result.prediction;
      }
    </script>
	<p id="output"></p>
  </body>
</html>

